// @asset(/libraries/web-share-shim/web-share-shim.html)
navigator.share=navigator.share||function(){if(navigator.share)return navigator.share;let a=navigator.userAgent.match(/Android/i),b=navigator.userAgent.match(/iPhone|iPad|iPod/i),c=!(b||a),d={whatsapp:(a)=>(c?'https://api.whatsapp.com/send?text=':'whatsapp://send?text=')+a,telegram:(a)=>(c?'https://telegram.me/share/msg?url='+location.host+'&text=':'tg://msg?text=')+a,facebook:(a,b,d)=>b?(c?'https://www.facebook.com/dialog/share?app_id='+b+'&display=popup&href='+d+'&redirect_uri='+encodeURIComponent(location.href)+'&quote=':'fb-messenger://share/?message=')+a:'',email:(a)=>'mailto:?body='+a,sms:(a)=>'sms:?body='+a};const e=new class{_init(){if(this._initialized)return Promise.resolve();this._initialized=!0;const a=fetch('/libraries/web-share-shim/web-share-shim.html').then((a)=>a.text());return a.then((a)=>{const b=document.createElement('div');b.innerHTML=a,this.$root=b.querySelector('.web-share'),this.$whatsapp=b.querySelector('.web-share-whatsapp'),this.$facebook=b.querySelector('.web-share-facebook'),this.$telegram=b.querySelector('.web-share-telegram'),this.$email=b.querySelector('.web-share-email'),this.$sms=b.querySelector('.web-share-sms'),this.$copy=b.querySelector('.web-share-copy'),this.$copy.onclick=()=>this._copy(),this.$root.onclick=()=>this._hide(),this.$root.classList.toggle('desktop',c),document.body.appendChild(b)})}_setPayload(a){let b=a.title+' '+a.text+' '+a.url,c=a.facebookId||'158651941570418';this.payload=b,b=encodeURIComponent(b),this.$whatsapp.href=d.whatsapp(b),this.$facebook.href=d.facebook(b,c,a.url),this.$telegram.href=d.telegram(b),this.$email.href=d.email(b),this.$sms.href=d.sms(b)}_copy(){const a=document.createElement('span');a.textContent=this.payload,a.style.whiteSpace='pre',a.style.position='absolute',a.style.left='-9999px',a.style.top='-9999px';const b=window,c=b.getSelection();b.document.body.appendChild(a);const d=b.document.createRange();c.removeAllRanges(),d.selectNode(a),c.addRange(d);let e=!1;try{e=b.document.execCommand('copy')}catch(a){}return c.removeAllRanges(),a.remove(),e}show(a){return this._init().then(()=>{clearTimeout(this._hideTimer),this._setPayload(a),this.$root.style.display='flex',this.$root.offsetWidth,this.$root.style.background='rgba(0,0,0,.4)',document.querySelectorAll('.web-share-container').forEach((a)=>{a.style.transform='translateY(0)',a.style.opacity=1})})}_hide(){this.$root.style.background=null,document.querySelectorAll('.web-share-container').forEach((a)=>{a.style.transform=null,a.style.opacity=null}),this._hideTimer=setTimeout(()=>this.$root.style.display=null,400)}};return(a)=>e.show(a)}();export default navigator.share;
